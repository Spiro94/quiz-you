---
phase: 05-ui-redesign-with-quiz-you-pen
plan: 03
type: execute
wave: 2
depends_on:
  - 05-01
files_modified:
  - src/pages/Dashboard.tsx
  - src/pages/SessionSummary.tsx
  - src/pages/SessionDetail.tsx
  - src/components/dashboard/SessionHistoryList.tsx
  - src/components/dashboard/FilterBar.tsx
  - src/components/dashboard/PerTopicAccuracy.tsx
  - src/components/dashboard/PerformanceTrends.tsx
  - src/components/dashboard/NextQuizRecommendation.tsx
  - src/components/dashboard/EmptyState.tsx
autonomous: false
requirements:
  - UI-REDESIGN-DASHBOARD
must_haves:
  truths:
    - "Dashboard page uses bg-background with dark surface cards for analytics and history sections"
    - "SessionHistoryList rows use bg-surface with border-border, hover shows bg-subtle; score colors use design tokens (success/accent/warning/error)"
    - "FilterBar uses bg-surface with dark topic chip active state (bg-primary-muted border-primary text-primary)"
    - "Recharts PerTopicAccuracy and PerformanceTrends use dark chart theme: dark grid, muted axis labels, primary accent line"
    - "NextQuizRecommendation uses primary-muted background instead of blue-50"
    - "EmptyState uses bg-surface card with foreground heading, muted-foreground body text, and primary CTA button"
    - "SessionSummary and SessionDetail pages use dark background and surface-based cards"
    - "Pagination buttons in SessionHistoryList use dark border-border styling with hover:bg-subtle"
    - "No regression in dashboard data loading, filtering, pagination, or session navigation"
  artifacts:
    - path: "src/components/dashboard/SessionHistoryList.tsx"
      provides: "Dark session rows with token-based score colors and pagination buttons"
    - path: "src/components/dashboard/FilterBar.tsx"
      provides: "Dark filter panel with purple active chip state and dark date inputs"
    - path: "src/components/dashboard/PerTopicAccuracy.tsx"
      provides: "Dark Recharts bar chart with dark grid/background and scoreToColor using token hex values"
    - path: "src/components/dashboard/PerformanceTrends.tsx"
      provides: "Dark Recharts line chart with primary accent stroke and dark axis styling"
    - path: "src/components/dashboard/NextQuizRecommendation.tsx"
      provides: "Recommendation card using primary-muted background with primary-border accent"
    - path: "src/pages/SessionSummary.tsx"
      provides: "Dark session summary page with surface cards for score and topic breakdown"
    - path: "src/pages/SessionDetail.tsx"
      provides: "Dark session detail page with surface Q&A cards and token-based score colors"
  key_links:
    - from: "src/components/dashboard/FilterBar.tsx"
      to: "onFilterChange prop"
      via: "State change calls onFilterChange callback — filter logic untouched"
      pattern: "onFilterChange\\("
    - from: "src/components/dashboard/PerTopicAccuracy.tsx"
      to: "useTopicAccuracy hook"
      via: "Data fetching via React Query hook — unchanged"
      pattern: "useTopicAccuracy"
    - from: "src/components/dashboard/PerformanceTrends.tsx"
      to: "usePerformanceTrends hook"
      via: "Data fetching via React Query hook — unchanged"
      pattern: "usePerformanceTrends"
---

<objective>
Apply quiz-you.pen design tokens to all dashboard flow components (Dashboard, SessionSummary, SessionDetail, SessionHistoryList, FilterBar, PerTopicAccuracy, PerformanceTrends, NextQuizRecommendation, EmptyState).

Purpose: The dashboard is the main user hub — session history, analytics charts, and recommendations need dark mode treatment. Recharts charts require additional dark theme props to match the overall dark design system.

Output: All dashboard components restyled to dark mode with consistent token usage. Recharts charts use dark backgrounds and primary-accent colors.
</objective>

<execution_context>
@/Users/danielvillamizar/.claude/get-shit-done/workflows/execute-plan.md
@/Users/danielvillamizar/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-ui-redesign-with-quiz-you-pen/05-RESEARCH.md
@.planning/phases/05-ui-redesign-with-quiz-you-pen/05-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Restyle Dashboard page, SessionHistoryList, FilterBar, EmptyState, and NextQuizRecommendation</name>
  <files>
    src/pages/Dashboard.tsx
    src/components/dashboard/SessionHistoryList.tsx
    src/components/dashboard/FilterBar.tsx
    src/components/dashboard/EmptyState.tsx
    src/components/dashboard/NextQuizRecommendation.tsx
  </files>
  <action>
    Apply design tokens to dashboard page and list-based components. DO NOT change any data fetching, pagination logic, filter callbacks, or routing.

    **src/pages/Dashboard.tsx:**
    - Root div: "min-h-screen bg-background flex flex-col" (was bg-gray-50)
    - "Your Sessions" h1: "text-xl font-bold text-foreground" (was text-gray-900)
    - "New Quiz" Link button: "bg-primary hover:bg-primary-hover text-white text-sm font-medium px-4 py-2 rounded-lg transition-colors" (was bg-blue-600 hover:bg-blue-700)
    - Analytics section divider: "space-y-4 pt-4 border-t border-border" (was border-gray-200)
    - "Analytics" h2: "text-lg font-bold text-foreground" (was text-gray-900)

    **src/components/dashboard/EmptyState.tsx:**
    - Root div: "flex flex-col items-center justify-center text-center px-6 py-24" (unchanged)
    - Inner max-w div: "max-w-md" (unchanged)
    - h2: "text-2xl font-semibold text-foreground mb-3" (was text-gray-900)
    - Body p: "text-muted-foreground mb-8" (was text-gray-500)
    - CTA Link: "inline-flex items-center rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background transition-colors" (was bg-blue-600 hover:bg-blue-500 ring-blue-500 ring-offset-white)

    **src/components/dashboard/SessionHistoryList.tsx:**
    - Skeleton loading divs: "h-16 bg-subtle rounded animate-pulse" (was bg-gray-200)
    - Empty state (when page > 0 or no sessions): "text-center py-12 bg-surface rounded-lg border border-border"
    - Empty state "No sessions yet" p: "text-muted-foreground text-lg" (was text-gray-500)
    - Empty state hint p: "text-muted-foreground text-sm mt-1" (was text-gray-400)
    - Empty state Start Quiz Link: "mt-4 inline-block bg-primary hover:bg-primary-hover text-white text-sm font-medium px-4 py-2 rounded-lg" (was bg-blue-600 hover:bg-blue-700)
    - Session row div: "block bg-surface rounded-lg border border-border px-4 py-3 hover:border-border-strong hover:bg-subtle transition-all" (was bg-white border-gray-200 hover:border-blue-300)
    - Topic text p: "text-sm font-medium text-foreground truncate" (was text-gray-800)
    - Date/difficulty/duration p: "text-xs text-muted-foreground mt-0.5" (was text-gray-400)
    - "Details" Link: "text-xs text-accent hover:underline" (was text-blue-600)
    - Score getScoreColor: The getScoreColor function is imported from src/lib/dashboard/recommendations.ts.
      DO NOT modify recommendations.ts here. Instead, check what it currently returns:
      If it returns Tailwind classes like "text-green-600", update recommendations.ts to return token classes:
      ```typescript
      export function getScoreColor(score: number): string {
        if (score >= 85) return 'text-success'
        if (score >= 70) return 'text-accent'
        if (score >= 50) return 'text-warning'
        return 'text-error'
      }
      ```
      Also update getScoreBgColor() if it exists, to return token bg classes:
      ```typescript
      export function getScoreBgColor(score: number): string {
        if (score >= 85) return 'bg-success-muted'
        if (score >= 70) return 'bg-primary-muted'
        if (score >= 50) return 'bg-warning-muted'
        return 'bg-error-muted'
      }
      ```
      NOTE: Both SessionHistoryList and SessionSummary/SessionDetail import these functions, so updating recommendations.ts propagates to all callers automatically.
    - Score number span: "text-2xl font-bold" + getScoreColor(row.final_score) (className unchanged structurally)
    - Completed/skipped count p: "text-xs text-muted-foreground" (was text-gray-400)
    - Pagination Previous/Next buttons: "px-3 py-1.5 text-sm border border-border rounded bg-surface hover:bg-subtle text-muted-foreground disabled:opacity-40 disabled:cursor-not-allowed transition" (was border-gray-300 hover:bg-gray-50)
    - Page number span: "text-xs text-muted-foreground" (was text-gray-400)
    - Add files_modified: src/lib/dashboard/recommendations.ts (update getScoreColor/getScoreBgColor)

    **src/components/dashboard/FilterBar.tsx:**
    - Root div: "bg-surface rounded-lg border border-border p-4 space-y-4" (was bg-white border-gray-200)
    - "Filter Sessions" h3: "text-sm font-semibold text-foreground" (was text-gray-700)
    - "Clear filters" button: "text-xs text-accent hover:underline" (was text-blue-600)
    - "From"/"To" labels: "block text-xs text-muted-foreground mb-1" (was text-gray-500)
    - Date inputs: "w-full border border-border rounded px-2 py-1.5 text-sm bg-elevated text-foreground focus:ring-2 focus:ring-primary focus:border-primary outline-none" (was border-gray-300 bg-white)
    - "Topics" label p: "text-xs text-muted-foreground mb-2" (was text-gray-500)
    - Topic chip buttons (inactive): "px-2 py-1 rounded-full text-xs font-medium bg-elevated text-muted-foreground hover:bg-subtle hover:text-foreground transition-colors"
      (was bg-gray-100 text-gray-600 hover:bg-gray-200)
    - Topic chip buttons (active, selectedTopics.includes(topic)): "px-2 py-1 rounded-full text-xs font-medium bg-primary-muted border border-primary text-primary"
      (was bg-blue-600 text-white)

    **src/components/dashboard/NextQuizRecommendation.tsx:**
    - Skeleton loading div: "h-36 bg-subtle rounded-lg animate-pulse" (was bg-gray-100)
    - Root card div: "bg-primary-muted border border-primary rounded-lg p-5" (was bg-blue-50 border-blue-100)
    - "Recommended Next Quiz" h2: "text-base font-semibold text-foreground mb-1" (was text-blue-900)
    - "Suggested Difficulty" label p: "text-xs font-medium text-muted-foreground uppercase tracking-wide" (was text-blue-700)
    - Difficulty value p: "text-foreground font-semibold" (was text-blue-800)
    - "Focus Areas" label p: "text-xs font-medium text-muted-foreground uppercase tracking-wide" (was text-blue-700)
    - Focus areas value p: "text-foreground" (was text-blue-800)
    - "below 70" hint p: "text-xs text-muted-foreground mt-0.5" (was text-blue-600)
    - "You're doing great" p: "text-muted-foreground text-sm" (was text-blue-700)
    - "Start a Quiz" Link: "mt-4 inline-block w-full text-center bg-primary hover:bg-primary-hover text-white text-sm font-semibold py-2 rounded-lg transition-colors" (was bg-blue-600 hover:bg-blue-700)
  </action>
  <verify>
    Run: npm run build (must include src/lib/dashboard/recommendations.ts in changed files)
    Must pass without TypeScript errors.

    Run: npm run dev and visit http://localhost:5173/dashboard (requires logged-in user with session data)
    1. Dashboard page: dark background, dark "New Quiz" button is purple
    2. SessionHistoryList: dark surface rows, border-border, hover shows bg-subtle
    3. FilterBar: dark surface panel, topic chips are dark elevated (inactive), purple-muted when active
    4. NextQuizRecommendation: primary-muted card with foreground text, purple CTA
    5. Pagination: dark buttons with subtle hover
    6. If no sessions: EmptyState shows foreground heading, muted body, purple CTA
  </verify>
  <done>
    - All 5 component files + src/lib/dashboard/recommendations.ts use design system tokens
    - getScoreColor() returns text-success/text-accent/text-warning/text-error
    - getScoreBgColor() returns bg-success-muted/bg-primary-muted/bg-warning-muted/bg-error-muted
    - Dashboard loads correctly with pagination and filters working
    - npm run build passes
  </done>
</task>

<task type="auto">
  <name>Task 2: Restyle Recharts charts, SessionSummary, and SessionDetail</name>
  <files>
    src/components/dashboard/PerTopicAccuracy.tsx
    src/components/dashboard/PerformanceTrends.tsx
    src/pages/SessionSummary.tsx
    src/pages/SessionDetail.tsx
  </files>
  <action>
    Apply dark theme to Recharts charts and detail pages. DO NOT change data queries, aggregation logic, or routing.

    **RECHARTS DARK THEME APPROACH:**
    Recharts uses explicit color props on chart components (stroke, fill, tick.fill) — not CSS classes. Use hex values from design tokens directly in these props.

    Token hex values reference (from quiz-you.pen):
    - primary: #7C3AED
    - accent: #06B6D4
    - success: #10B981
    - warning: #F59E0B
    - error: #EF4444
    - border: #2E2E3F
    - surface: #13131A
    - muted-foreground: #A1A1B5
    - foreground: #F4F4F6

    **src/components/dashboard/PerTopicAccuracy.tsx:**
    - Skeleton: "h-64 bg-subtle rounded-lg animate-pulse" (was bg-gray-100)
    - Empty state card div: "bg-surface rounded-lg border border-border p-6 text-center"
    - Empty state p: "text-muted-foreground text-sm" (was text-gray-400)
    - Chart card div: "bg-surface rounded-lg border border-border p-6" (was bg-white border-gray-200)
    - "Accuracy by Topic" h2: "text-base font-semibold text-foreground mb-4" (was text-gray-800)
    - CartesianGrid: add stroke="#2E2E3F" (border token) strokeOpacity={0.5}
    - XAxis: add tick={{ fill: '#A1A1B5', fontSize: 11 }} axisLine={{ stroke: '#2E2E3F' }} tickLine={{ stroke: '#2E2E3F' }}
    - YAxis: add tick={{ fill: '#A1A1B5', fontSize: 12 }} axisLine={{ stroke: '#2E2E3F' }} tickLine={{ stroke: '#2E2E3F' }}
    - Tooltip: add contentStyle={{ backgroundColor: '#1C1C27', border: '1px solid #2E2E3F', borderRadius: '6px', color: '#F4F4F6' }}
    - Update scoreToColor() to return design token hex values:
      ```typescript
      function scoreToColor(score: number): string {
        if (score >= 85) return '#10B981'  // success
        if (score >= 70) return '#06B6D4'  // accent (was blue-600 #2563eb)
        if (score >= 50) return '#F59E0B'  // warning
        return '#EF4444'                   // error
      }
      ```
      (Changed: blue-600 #2563eb → accent #06B6D4 for 70-84 tier)

    **src/components/dashboard/PerformanceTrends.tsx:**
    - Skeleton: "h-64 bg-subtle rounded-lg animate-pulse" (was bg-gray-100)
    - Empty state card div: "bg-surface rounded-lg border border-border p-6 text-center"
    - Empty state p: "text-muted-foreground text-sm" (was text-gray-400)
    - Chart card div: "bg-surface rounded-lg border border-border p-6" (was bg-white border-gray-200)
    - "Performance Over Time" h2: "text-base font-semibold text-foreground mb-4" (was text-gray-800)
    - CartesianGrid: add stroke="#2E2E3F" strokeOpacity={0.5}
    - XAxis: add tick={{ fill: '#A1A1B5', fontSize: 11 }} axisLine={{ stroke: '#2E2E3F' }} tickLine={{ stroke: '#2E2E3F' }}
    - YAxis: add tick={{ fill: '#A1A1B5', fontSize: 11 }} axisLine={{ stroke: '#2E2E3F' }} tickLine={{ stroke: '#2E2E3F' }}
    - Tooltip: add contentStyle={{ backgroundColor: '#1C1C27', border: '1px solid #2E2E3F', borderRadius: '6px', color: '#F4F4F6' }}
    - Line: change stroke from "#2563eb" to "#7C3AED" (primary token), dot={{ fill: '#7C3AED', r: 3 }}, activeDot={{ r: 5, fill: '#06B6D4' }} (accent on hover)

    **src/pages/SessionSummary.tsx:**
    - Loading div: "min-h-screen bg-background flex items-center justify-center"
    - Loading p: "text-muted-foreground"
    - Error div: same dark wrapper; error p: "text-error mb-3"; back link: "text-accent underline text-sm"
    - Main root div (post-load): "min-h-screen bg-background py-8 px-4" (was bg-gray-50 or similar)
    - Content container: "max-w-2xl mx-auto space-y-6"
    - Score card (if wrapped in a div/card): "bg-surface rounded-lg border border-border p-6"
    - Final score display: use getScoreColor(summary.finalScore) which now returns text-success/text-accent/text-warning/text-error
    - Score label text: "text-muted-foreground" (was text-gray-500)
    - Back to Dashboard link: "text-sm text-accent hover:underline" (was text-blue-600)
    - Section headings: "text-foreground font-semibold" (was text-gray-900)
    - Topic breakdown card/section: "bg-surface rounded-lg border border-border p-6"
    - Per-topic rows: "flex justify-between items-center py-2 border-b border-border last:border-0"
    - Topic name text: "text-foreground text-sm" (was text-gray-700)
    - Score values: use getScoreColor() for colored score, text-muted-foreground for secondary info
    - Recommendation section: "bg-primary-muted border border-primary rounded-lg p-5"
    - Recommendation text: "text-foreground" headings, "text-muted-foreground" body
    - "Start Another Quiz" or "Back to Dashboard" CTA buttons: bg-primary hover:bg-primary-hover text-white (was bg-blue-600)

    **src/pages/SessionDetail.tsx:**
    - Loading div: "min-h-screen bg-background flex items-center justify-center"
    - Loading p: "text-muted-foreground"
    - Error div: dark wrapper; error p: "text-error mb-3"; back link: "text-accent underline text-sm"
    - Root: "min-h-screen bg-background py-8 px-4" (was bg-gray-50)
    - Header section: back Link "text-sm text-accent hover:underline" (was text-blue-600)
    - h1: "text-xl font-bold text-foreground mt-2" (was text-gray-900)
    - Subtitle p: "text-muted-foreground text-sm" (was text-gray-500)
    - Q&A item cards: "bg-surface rounded-lg border border-border p-5 space-y-3" (was bg-white border-gray-200 or similar)
    - Question number/badge: use type-appropriate tokens (coding=primary-muted/primary, theoretical=success-muted/success)
    - Question text: "text-foreground font-medium" (was text-gray-900)
    - "Your Answer" label: "text-xs font-semibold text-muted-foreground uppercase tracking-wide" (was text-gray-500)
    - User answer code/text block: "bg-code-bg border border-code-border rounded p-3 text-foreground font-mono text-sm whitespace-pre-wrap" (was bg-gray-50 or similar)
    - "Feedback" label: "text-xs font-semibold text-muted-foreground uppercase tracking-wide"
    - Feedback prose: "prose prose-sm max-w-none text-muted-foreground"
    - "Model Answer" label: "text-xs font-semibold text-muted-foreground uppercase tracking-wide"
    - Model answer prose: "prose prose-sm max-w-none text-foreground"
    - Score badge for each Q: use getScoreColor(answer.score) for score number, "text-xs text-muted-foreground" for "/ 100"
    - Skipped badge: "inline-flex items-center rounded-full bg-warning-muted border border-warning px-2 py-0.5 text-xs text-warning"
  </action>
  <verify>
    Run: npm run build — must pass without TypeScript errors.

    Run: npm run dev
    1. Visit /dashboard with session data:
       - PerTopicAccuracy bar chart: dark chart card, dark grid lines, muted axis labels, score-color bars (success=green, accent=cyan, warning=amber, error=red)
       - PerformanceTrends line chart: dark card, primary purple line (#7C3AED), dark grid
       - Tooltip popups: dark background (#1C1C27) with foreground text
    2. Complete or navigate to a past session summary (/session/:id/summary)
       - Dark page, surface cards for score/breakdown, primary-muted recommendation card
    3. Navigate to session detail (/session/:id/detail)
       - Dark page, surface Q&A cards, code blocks in code-bg, token score colors
    4. Chart tooltips visible and readable on dark background
    5. All data still loads correctly (no regression in Supabase queries)
  </verify>
  <done>
    - PerTopicAccuracy and PerformanceTrends use dark Recharts theme (dark grid, muted tick labels, tooltip dark bg)
    - scoreToColor() in PerTopicAccuracy returns design token hex values
    - Line chart uses primary (#7C3AED) stroke instead of blue
    - SessionSummary and SessionDetail pages use bg-background with surface cards
    - npm run build passes
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Checkpoint: Verify dashboard flow dark mode and full dashboard functionality</name>
  <files>src/pages/Dashboard.tsx, src/components/dashboard/PerTopicAccuracy.tsx, src/components/dashboard/PerformanceTrends.tsx</files>
  <action>Human visual verification of dark mode dashboard flow including Recharts dark theme and full dashboard functionality</action>
  <verify>See how-to-verify steps below</verify>
  <done>Human types "approved" confirming dark mode dashboard matches design system and all dashboard features work</done>
  <what-built>
    Dashboard flow dark mode redesign:
    - src/pages/Dashboard.tsx: dark page, purple New Quiz button, dark analytics section
    - src/components/dashboard/SessionHistoryList.tsx: dark surface rows, token score colors, dark pagination
    - src/components/dashboard/FilterBar.tsx: dark surface panel, purple-muted active topic chips, dark date inputs
    - src/components/dashboard/EmptyState.tsx: foreground heading, muted body, purple CTA
    - src/components/dashboard/NextQuizRecommendation.tsx: primary-muted card
    - src/components/dashboard/PerTopicAccuracy.tsx: dark Recharts bar chart, design token bar colors
    - src/components/dashboard/PerformanceTrends.tsx: dark Recharts line chart, primary purple line
    - src/pages/SessionSummary.tsx: dark summary page with surface cards
    - src/pages/SessionDetail.tsx: dark detail page with surface Q&A cards
    - src/lib/dashboard/recommendations.ts: getScoreColor/getScoreBgColor updated to design tokens
  </what-built>
  <how-to-verify>
    Run: npm run dev

    1. Visit http://localhost:5173/dashboard (must be logged in with session data)
       Expected:
       - Dark page background, purple "New Quiz" button
       - Session rows: dark surface bg, border-border, hover shows subtle bg
       - Topic filter chips: dark elevated (inactive), purple-muted with purple border/text (active)
       - Date inputs: dark elevated background with light text
       - NextQuizRecommendation: dark purple card (primary-muted) with foreground text, purple CTA
       - PerTopicAccuracy chart: dark card, dark grid, muted axis text, bars in green/cyan/amber/red
       - PerformanceTrends chart: dark card, purple line (#7C3AED), dark grid
       - Chart tooltips: dark background when hovering data points

    2. Click a session row → navigate to /session/:id/summary
       Expected: Dark background, surface score card, primary-muted recommendation section

    3. Click Details → navigate to /session/:id/detail
       Expected: Dark background, Q&A surface cards, code blocks with code-bg (#111118), score numbers in token colors

    4. Test pagination: click Next Page, verify sessions load and display correctly

    5. Test topic filter: click a topic chip (turns purple-muted), verify list updates

    6. Check 3 breakpoints:
       - Mobile (375px): charts should resize (ResponsiveContainer), list readable
       - Tablet (768px): analytics grid goes to single column, readable
       - Desktop (1024px): 2-column analytics grid, full layout

    7. Run Lighthouse Accessibility on /dashboard
       Expected: Score >= 85; chart aria-label attributes preserved; filter chip contrast verified

    8. Full end-to-end smoke test: Login → start quiz → complete → view summary → return to dashboard → view session detail. All steps should work with dark theme throughout.
  </how-to-verify>
  <resume-signal>Type "approved" if dashboard flow matches dark design system and all functionality works, or describe any visual or functional issues</resume-signal>
</task>

</tasks>

<verification>
- npm run build passes (no TypeScript errors, no CSS errors)
- All 9 component/page files use only design system token classes (no remaining bg-blue-*, bg-white, bg-gray-*, text-gray-*, border-gray-* in dashboard flow)
- src/lib/dashboard/recommendations.ts: getScoreColor returns text-success/text-accent/text-warning/text-error
- Recharts charts: dark grid (#2E2E3F), muted tick labels (#A1A1B5), dark tooltip bg (#1C1C27), primary line (#7C3AED), token bar colors
- SessionHistoryList rows: surface bg, border-border, subtle hover
- FilterBar topic chips: elevated inactive, primary-muted active
- NextQuizRecommendation uses primary-muted card
- SessionSummary and SessionDetail are full dark mode with surface cards
- All dashboard data queries, pagination, filters, and navigation work without regression
- Responsive at 375px, 768px, 1024px breakpoints
- Lighthouse accessibility score >= 85
</verification>

<success_criteria>
- All 9 dashboard files exclusively use quiz-you.pen design tokens
- Recharts charts are dark-themed with token hex values for strokes, fills, and ticks
- Score color functions in recommendations.ts use token classes (text-success, text-accent, text-warning, text-error)
- Dashboard filtering, pagination, session navigation all work end-to-end
- Visual consistency with auth and quiz flows (same token set used throughout)
- Human-verify checkpoint approved
- Full dark mode experience verified across all 7 user-facing pages
</success_criteria>

<output>
After completion, create `.planning/phases/05-ui-redesign-with-quiz-you-pen/05-03-SUMMARY.md` with:
- Changes made to each of the 9 files
- Recharts dark theme approach (explicit hex props vs CSS classes)
- getScoreColor/getScoreBgColor token mapping decisions
- Any Recharts-specific issues encountered (axis colors, tooltip styling)
- Checkpoint result
- Final note: confirm all 7 pages are now dark mode — Login, Signup, Dashboard, QuizSetup, QuizSession, SessionSummary, SessionDetail
</output>
