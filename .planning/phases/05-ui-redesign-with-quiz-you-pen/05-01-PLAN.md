---
phase: 05-ui-redesign-with-quiz-you-pen
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/index.css
  - src/pages/Login.tsx
  - src/pages/Signup.tsx
  - src/components/auth/LoginForm.tsx
  - src/components/auth/SignupForm.tsx
  - src/components/auth/LogoutButton.tsx
  - src/components/dashboard/DashboardHeader.tsx
autonomous: false
requirements:
  - UI-REDESIGN-AUTH
must_haves:
  truths:
    - "All quiz-you.pen design tokens (23 color variables + 2 font variables) are available as Tailwind utility classes (bg-primary, text-foreground, border-border, etc.)"
    - "Login and Signup pages use dark background (#0A0A0F), purple primary button (#7C3AED), and foreground text (#F4F4F6)"
    - "DashboardHeader uses dark surface background (#13131A) with border (#2E2E3F) matching design system"
    - "All auth form inputs use elevated background (#1C1C27), border (#2E2E3F), and foreground placeholder (#6B6B80)"
    - "Error states use design system error color (#EF4444) on error-muted background (#450A0A)"
    - "No existing auth functionality is broken — login, signup, and logout still work end-to-end"
  artifacts:
    - path: "src/index.css"
      provides: "Tailwind v4 @theme block with all 23 quiz-you.pen color tokens and Google Fonts import for Inter + JetBrains Mono"
      contains: "@theme"
    - path: "src/pages/Login.tsx"
      provides: "Dark mode login page with bg-background and token-based heading classes"
    - path: "src/components/auth/LoginForm.tsx"
      provides: "Dark mode form with bg-surface card, bg-elevated inputs, bg-primary button, error/success states"
    - path: "src/components/auth/SignupForm.tsx"
      provides: "Dark mode form matching LoginForm pattern exactly"
    - path: "src/components/dashboard/DashboardHeader.tsx"
      provides: "Dark header with bg-surface, border-border, text-foreground app name and muted-foreground email"
  key_links:
    - from: "src/index.css"
      to: "All component files"
      via: "@theme block defining --color-* CSS variables consumed by Tailwind utility classes"
      pattern: "@theme"
    - from: "src/components/auth/LoginForm.tsx"
      to: "useAuth.signIn()"
      via: "handleSubmit calls signIn(email, password) — auth logic untouched"
      pattern: "signIn\\("
---

<objective>
Extract all 23 quiz-you.pen design tokens into Tailwind v4 @theme CSS config, then apply the design system to all auth flow components (Login, Signup, DashboardHeader).

Purpose: Establishes the token foundation that Plans 5-2 and 5-3 rely on. Auth flow is the first user touchpoint — getting it right first validates the dark theme approach before broader rollout.

Output: src/index.css with complete @theme token block; Login/Signup pages and DashboardHeader fully restyled to dark mode with purple accents.
</objective>

<execution_context>
@/Users/danielvillamizar/.claude/get-shit-done/workflows/execute-plan.md
@/Users/danielvillamizar/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-ui-redesign-with-quiz-you-pen/05-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Inject quiz-you.pen design tokens into Tailwind v4 CSS config</name>
  <files>src/index.css</files>
  <action>
    This project uses Tailwind CSS 4.2.0 with @tailwindcss/vite. Tailwind v4 does NOT use tailwind.config.ts — design tokens are registered via @theme blocks in CSS. DO NOT create tailwind.config.ts.

    Replace the contents of src/index.css with the following (in exact order):

    1. Google Fonts import for Inter (body) and JetBrains Mono (code) — add BEFORE @import "tailwindcss":
       @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

    2. @import "tailwindcss"; (keep as-is)

    3. @theme block with all quiz-you.pen color tokens mapped to Tailwind --color-* namespace:
       ```css
       @theme {
         /* quiz-you.pen design tokens */
         --color-primary: #7C3AED;
         --color-primary-hover: #6D28D9;
         --color-primary-muted: #3B1F6A;
         --color-accent: #06B6D4;
         --color-background: #0A0A0F;
         --color-surface: #13131A;
         --color-elevated: #1C1C27;
         --color-subtle: #22222F;
         --color-foreground: #F4F4F6;
         --color-muted-foreground: #A1A1B5;
         --color-placeholder: #6B6B80;
         --color-border: #2E2E3F;
         --color-border-strong: #3D3D52;
         --color-code-bg: #111118;
         --color-code-border: #252535;
         --color-success: #10B981;
         --color-success-muted: #064E3B;
         --color-warning: #F59E0B;
         --color-warning-muted: #451A03;
         --color-error: #EF4444;
         --color-error-muted: #450A0A;

         /* Typography */
         --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
         --font-mono: 'JetBrains Mono', SFMono, 'Fira Mono', monospace;
       }
       ```

    4. Global base styles after @theme:
       ```css
       @layer base {
         body {
           background-color: theme(--color-background);
           color: theme(--color-foreground);
           font-family: var(--font-sans);
         }
       }
       ```

    After this change, Tailwind will expose utility classes: bg-primary, bg-surface, bg-elevated, bg-background, bg-subtle, text-foreground, text-muted-foreground, text-placeholder, text-primary, text-accent, text-success, text-warning, text-error, border-border, border-border-strong, bg-error, bg-error-muted, bg-success, bg-success-muted, bg-warning, bg-warning-muted, font-sans, font-mono.

    Token values (verified from quiz-you.pen file):
    - primary: #7C3AED (purple, CTA buttons)
    - primary-hover: #6D28D9 (darker purple, hover state)
    - primary-muted: #3B1F6A (very dark purple, subtle backgrounds)
    - accent: #06B6D4 (cyan, links and highlights)
    - background: #0A0A0F (near-black, page background)
    - surface: #13131A (dark card background)
    - elevated: #1C1C27 (slightly lighter, inputs)
    - subtle: #22222F (hover/focus backgrounds)
    - foreground: #F4F4F6 (primary text, near-white)
    - muted-foreground: #A1A1B5 (secondary text)
    - placeholder: #6B6B80 (input placeholder text)
    - border: #2E2E3F (standard border)
    - border-strong: #3D3D52 (emphasized border)
    - code-bg: #111118 (code block background)
    - code-border: #252535 (code block border)
    - success: #10B981 (green)
    - success-muted: #064E3B (dark green bg)
    - warning: #F59E0B (amber)
    - warning-muted: #451A03 (dark amber bg)
    - error: #EF4444 (red)
    - error-muted: #450A0A (dark red bg)
  </action>
  <verify>
    Run: npm run build
    Must complete without errors. If build fails due to CSS syntax, fix the @theme block syntax.

    Also run: npm run dev
    Open browser to http://localhost:5173. Body background should be near-black (#0A0A0F). If it's still white, the @theme block is not being picked up — verify the Fonts import is placed BEFORE @import "tailwindcss".
  </verify>
  <done>
    - src/index.css has @theme block with 21 --color-* variables and --font-sans/--font-mono
    - npm run build completes without errors
    - Body background is #0A0A0F in browser (confirmed via DevTools)
    - bg-primary, text-foreground, border-border are usable utility classes in component files
  </done>
</task>

<task type="auto">
  <name>Task 2: Restyle auth pages (Login, Signup) and DashboardHeader to dark design system</name>
  <files>
    src/pages/Login.tsx
    src/pages/Signup.tsx
    src/components/auth/LoginForm.tsx
    src/components/auth/SignupForm.tsx
    src/components/auth/LogoutButton.tsx
    src/components/dashboard/DashboardHeader.tsx
  </files>
  <action>
    Apply quiz-you.pen design tokens to all auth flow components. DO NOT change any logic, hooks, or event handlers — only update className strings.

    **src/pages/Login.tsx:**
    Replace the main className from "min-h-screen bg-gradient-to-br from-indigo-50 to-white flex items-center justify-center px-4"
    with "min-h-screen bg-background flex items-center justify-center px-4"
    Replace h1 className from "text-3xl font-bold text-gray-900 mb-2" with "text-3xl font-bold text-foreground mb-2"
    Replace p className from "text-gray-600" with "text-muted-foreground"

    **src/pages/Signup.tsx:**
    Apply identical page-level changes as Login.tsx: bg-background, text-foreground headings, text-muted-foreground subheadings.

    **src/components/auth/LoginForm.tsx:**
    - form: "space-y-5 bg-surface rounded-lg border border-border p-8" (remove shadow-md, add border-border)
    - label (both): "block text-sm font-medium text-muted-foreground mb-2"
    - inputs (both): "w-full px-4 py-2.5 border border-border rounded-lg bg-elevated text-foreground placeholder:text-placeholder focus:ring-2 focus:ring-primary focus:border-primary outline-none transition"
    - error paragraph: "px-4 py-3 rounded-lg bg-error-muted text-error text-sm border border-error"
    - submit button: "w-full py-2.5 bg-primary text-white font-medium rounded-lg hover:bg-primary-hover disabled:opacity-50 disabled:cursor-not-allowed transition"
    - signup link p: "text-center text-sm text-muted-foreground"
    - signup Link: "text-accent hover:text-accent font-medium underline"

    **src/components/auth/SignupForm.tsx:**
    Apply identical className changes as LoginForm.tsx — same form, input, label, error, and button patterns.

    **src/components/auth/LogoutButton.tsx:**
    - button: "px-4 py-2 text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-subtle rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition"

    **src/components/dashboard/DashboardHeader.tsx:**
    - header: "flex items-center justify-between px-6 py-4 border-b border-border bg-surface"
    - app name span: "text-xl font-semibold text-foreground"
    - email span: "text-sm text-muted-foreground"

    Keep all existing JSX structure, event handlers, conditionals, and imports unchanged.
  </action>
  <verify>
    Run: npm run build
    Must complete without TypeScript or build errors.

    Run: npm run dev
    Manually verify at http://localhost:5173/login:
    1. Page background is near-black
    2. Form card has dark surface background with visible border
    3. Inputs have elevated dark background, light placeholder text
    4. "Log in" button is purple (#7C3AED)
    5. "Sign up" link text is cyan (#06B6D4)
    6. At http://localhost:5173/dashboard: header is dark with visible app name
    7. Login and logout still function correctly (no regressions)
  </verify>
  <done>
    - All 6 files compile without TypeScript errors
    - Login/Signup pages are dark mode: dark background, purple CTA buttons, cyan links
    - DashboardHeader shows dark surface with foreground text
    - Auth functionality (login, signup, logout) verified working end-to-end
    - No hardcoded gray/indigo Tailwind classes remain in these 6 files
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Checkpoint: Verify auth flow dark mode and token system</name>
  <files>src/index.css, src/pages/Login.tsx, src/components/auth/LoginForm.tsx</files>
  <action>Human visual verification of dark mode auth flow and token system integration</action>
  <verify>See how-to-verify steps below</verify>
  <done>Human types "approved" confirming dark mode auth flow matches design system</done>
  <what-built>
    Token system and auth flow dark mode redesign:
    - src/index.css: @theme with 21 color tokens + 2 font tokens from quiz-you.pen
    - src/pages/Login.tsx + Signup.tsx: dark background, redesigned headings
    - src/components/auth/LoginForm.tsx + SignupForm.tsx: dark form cards, purple buttons, cyan links
    - src/components/auth/LogoutButton.tsx: muted ghost button style
    - src/components/dashboard/DashboardHeader.tsx: dark surface header
  </what-built>
  <how-to-verify>
    Run: npm run dev

    1. Visit http://localhost:5173/login
       Expected: Dark near-black page background, centered card with dark surface bg (#13131A), email+password inputs with dark elevated bg (#1C1C27), purple "Log in" button (#7C3AED), cyan "Sign up" link

    2. Test login with valid credentials
       Expected: Redirect to /dashboard with dark header visible

    3. Visit http://localhost:5173/signup
       Expected: Same dark treatment as login page

    4. Check 3 responsive breakpoints in DevTools:
       - Mobile (375px): form centered, full-width button, inputs fit width
       - Tablet (768px): form centered, comfortable padding
       - Desktop (1024px): same as current, no layout regression

    5. Run Chrome DevTools Lighthouse Accessibility audit on /login
       Expected: Score >= 90; contrast ratios for text-foreground (#F4F4F6) on bg-surface (#13131A) = 12.6:1 (WCAG AAA)

    6. Enter invalid credentials, observe error state
       Expected: Error message uses dark red background (#450A0A) with red text (#EF4444), visible and readable
  </how-to-verify>
  <resume-signal>Type "approved" if auth flow matches dark design system, or describe any visual issues</resume-signal>
</task>

</tasks>

<verification>
- npm run build passes (no TypeScript errors, no CSS errors)
- All 6 component files use only quiz-you.pen token classes (no remaining bg-gray-*, bg-indigo-*, text-gray-* classes)
- src/index.css @theme block contains all 23 variables matching quiz-you.pen values exactly
- Login, signup, logout user flows verified working in browser
- Responsive layout verified at 375px, 768px, 1024px breakpoints
- Accessibility: WCAG AA contrast verified for all text/background combos (foreground #F4F4F6 on surface #13131A = 12.6:1)
</verification>

<success_criteria>
- src/index.css @theme block defines all quiz-you.pen tokens accessible as Tailwind utilities (bg-primary, text-foreground, etc.)
- Login and Signup pages display dark mode with purple CTA buttons — visually matches quiz-you.pen dark theme intent
- DashboardHeader displays dark surface with proper border and muted user email
- Zero hardcoded gray/indigo Tailwind classes remain in the 6 modified files
- npm run build passes without errors
- All auth functionality (login, signup, logout, session persistence) remains fully working
</success_criteria>

<output>
After completion, create `.planning/phases/05-ui-redesign-with-quiz-you-pen/05-01-SUMMARY.md` with:
- Token system decisions (why @theme in CSS vs tailwind.config.ts — Tailwind v4 requirement)
- List of all 23 tokens extracted and their actual hex values
- Auth flow changes made to each file
- Any issues encountered during refactoring
- Screenshot or confirmation from human-verify checkpoint
</output>
