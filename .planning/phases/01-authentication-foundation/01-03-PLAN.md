---
phase: 01-authentication-foundation
plan: 03
type: execute
wave: 2
depends_on:
  - 01-01
files_modified:
  - src/pages/Dashboard.tsx
  - src/components/dashboard/DashboardHeader.tsx
  - src/components/dashboard/EmptyState.tsx
  - src/App.tsx
autonomous: false
# autonomous: false because Task 3 is a checkpoint:human-verify (visual and interactive flow verification)
requirements:
  - DATA-02

must_haves:
  truths:
    - "Authenticated users who land on /dashboard see their email address displayed"
    - "The dashboard renders a clear empty state with a headline and call-to-action copy explaining that quiz sessions will appear here"
    - "The logout button is accessible on the dashboard page"
    - "No user data from other accounts is ever visible on the dashboard"
  artifacts:
    - path: "src/pages/Dashboard.tsx"
      provides: "Authenticated dashboard page reading user identity from AuthContext and rendering empty-state UI"
      exports: ["default"]
    - path: "src/components/dashboard/DashboardHeader.tsx"
      provides: "Header bar with app name, user email, and LogoutButton"
      exports: ["DashboardHeader"]
    - path: "src/components/dashboard/EmptyState.tsx"
      provides: "Empty state component with headline and instructional copy for users with no sessions yet"
      exports: ["EmptyState"]
  key_links:
    - from: "src/pages/Dashboard.tsx"
      to: "src/context/AuthContext.tsx"
      via: "useAuth() hook reading user.email"
      pattern: "useAuth"
    - from: "src/components/dashboard/DashboardHeader.tsx"
      to: "src/components/auth/LogoutButton.tsx"
      via: "LogoutButton rendered inside header"
      pattern: "LogoutButton"
    - from: "src/App.tsx"
      to: "src/pages/Dashboard.tsx"
      via: "Replace DashboardPlaceholder import with Dashboard import inside ProtectedRoute"
      pattern: "import Dashboard"
---

<objective>
Build the authenticated dashboard landing page: a DashboardHeader showing the user's email and logout action, and an EmptyState body communicating that quiz sessions will appear here once started. This is a stub — no real data, no charts, no history. The only live data is the authenticated user's email from AuthContext.

Purpose: Phase 1 success criterion 4 requires that "user's identity and profile data survive across distinct browser visits." The dashboard is where that identity becomes visible. Addresses DATA-02: the user's authenticated identity is displayed immediately on landing, confirming persisted data is accessible.

Output: A fully rendered /dashboard page that greets the user by email, explains the empty state, and provides a logout action — ready to hold real data in Phase 4.
</objective>

<execution_context>
@/Users/danielvillamizar/.claude/get-shit-done/workflows/execute-plan.md
@/Users/danielvillamizar/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-authentication-foundation/01-RESEARCH.md
@.planning/phases/01-authentication-foundation/01-01-SUMMARY.md

Key facts:
- AuthContext provides `user` (Supabase User object). user.email is the authenticated user's email.
- LogoutButton already exists from 01-02 — import and use it, do not rewrite it.
- App.tsx from 01-02 has a DashboardPlaceholder — this plan replaces it with the real Dashboard.
- Stack is React + Tailwind CSS (locked). Style with Tailwind utility classes.
- No real quiz data exists yet. Phase 4 fills this dashboard. Phase 1 shows an intentional empty state.
- This plan runs in Wave 2 alongside 01-02, both depending on 01-01. If 01-02 finishes first, the DashboardPlaceholder in App.tsx needs updating. If this plan finishes first, 01-02 will update App.tsx when it completes.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build Dashboard page and components</name>
  <files>
    src/pages/Dashboard.tsx
    src/components/dashboard/DashboardHeader.tsx
    src/components/dashboard/EmptyState.tsx
  </files>
  <action>
    Create `src/components/dashboard/DashboardHeader.tsx`:
    - Displays app name "Quiz You" on the left
    - Displays the authenticated user's email on the right
    - Renders LogoutButton next to the email
    - Uses Tailwind for layout: flex, justify-between, items-center, border-bottom

    ```typescript
    // src/components/dashboard/DashboardHeader.tsx
    import { LogoutButton } from '../auth/LogoutButton'
    import { useAuth } from '../../context/AuthContext'

    export function DashboardHeader() {
      const { user } = useAuth()

      return (
        <header className="flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-white">
          <span className="text-xl font-semibold text-gray-900">Quiz You</span>
          <div className="flex items-center gap-4">
            {user?.email && (
              <span className="text-sm text-gray-500">{user.email}</span>
            )}
            <LogoutButton />
          </div>
        </header>
      )
    }
    ```

    Create `src/components/dashboard/EmptyState.tsx`:
    - Clear, encouraging copy explaining the dashboard's purpose
    - Call-to-action copy pointing toward starting a quiz session (the button itself won't be functional until Phase 2 — render it as disabled or as text)
    - Uses Tailwind for centered layout

    ```typescript
    // src/components/dashboard/EmptyState.tsx
    export function EmptyState() {
      return (
        <div className="flex flex-col items-center justify-center text-center px-6 py-24">
          <div className="max-w-md">
            <h2 className="text-2xl font-semibold text-gray-900 mb-3">
              No sessions yet
            </h2>
            <p className="text-gray-500 mb-8">
              Start a quiz session to practice interview questions. Your sessions,
              scores, and progress will appear here after you complete your first quiz.
            </p>
            {/* Button becomes functional in Phase 2 */}
            <button
              disabled
              className="inline-flex items-center px-5 py-2.5 rounded-lg bg-indigo-600 text-white text-sm font-medium opacity-50 cursor-not-allowed"
              title="Coming soon — available after Phase 2"
            >
              Start a quiz session
            </button>
            <p className="mt-3 text-xs text-gray-400">
              Quiz session setup is coming in the next update.
            </p>
          </div>
        </div>
      )
    }
    ```

    Create `src/pages/Dashboard.tsx`:
    - Full-height authenticated page
    - DashboardHeader at the top
    - EmptyState as the main content
    - Uses user from AuthContext to confirm authentication (RLS ensures no cross-user data)

    ```typescript
    // src/pages/Dashboard.tsx
    import { DashboardHeader } from '../components/dashboard/DashboardHeader'
    import { EmptyState } from '../components/dashboard/EmptyState'

    export default function DashboardPage() {
      return (
        <div className="min-h-screen bg-gray-50 flex flex-col">
          <DashboardHeader />
          <main className="flex-1">
            <EmptyState />
          </main>
        </div>
      )
    }
    ```

    IMPORTANT — Tailwind CSS: If Tailwind is not yet configured, add it now:
    ```bash
    npm install -D tailwindcss @tailwindcss/vite
    ```
    Then update `vite.config.ts` to include the Tailwind plugin, and add `@import "tailwindcss"` to `src/index.css`.
    If Tailwind is already configured (check for tailwind in package.json and index.css), skip this step.
  </action>
  <verify>
    - `npx tsc --noEmit` — no TypeScript errors in any of the three new files
    - Verify DashboardHeader imports LogoutButton from the correct path (src/components/auth/LogoutButton)
    - Verify DashboardHeader uses useAuth() to read user.email
    - Verify EmptyState "Start a quiz session" button has `disabled` attribute
    - Verify DashboardPage exports as default
  </verify>
  <done>
    - DashboardHeader renders app name + user email + LogoutButton in a flex row
    - EmptyState renders explanatory copy and a disabled CTA button
    - DashboardPage composes both components in a full-height layout
    - TypeScript compiles cleanly
  </done>
</task>

<task type="auto">
  <name>Task 2: Wire Dashboard into App.tsx router</name>
  <files>
    src/App.tsx
  </files>
  <action>
    Replace the DashboardPlaceholder in App.tsx with the real Dashboard import.

    Find the existing App.tsx (created in 01-02 or already present). It contains either:
    a) `const DashboardPlaceholder = () => <div>Dashboard coming soon (01-03)</div>` — replace with real import
    b) An existing Dashboard import that is already wired — verify it points to src/pages/Dashboard.tsx

    The updated /dashboard route section of App.tsx should look like:

    ```typescript
    import DashboardPage from './pages/Dashboard'

    // ... inside Routes:
    <Route
      path="/dashboard"
      element={
        <ProtectedRoute>
          <DashboardPage />
        </ProtectedRoute>
      }
    />
    ```

    Remove the DashboardPlaceholder const if it exists. The full App.tsx after update:

    ```typescript
    // src/App.tsx
    import { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom'
    import { AuthProvider } from './context/AuthContext'
    import { ProtectedRoute } from './components/layout/ProtectedRoute'
    import LoginPage from './pages/Login'
    import SignupPage from './pages/Signup'
    import DashboardPage from './pages/Dashboard'

    function App() {
      return (
        <BrowserRouter>
          <AuthProvider>
            <Routes>
              <Route path="/login" element={<LoginPage />} />
              <Route path="/signup" element={<SignupPage />} />
              <Route
                path="/dashboard"
                element={
                  <ProtectedRoute>
                    <DashboardPage />
                  </ProtectedRoute>
                }
              />
              <Route path="/" element={<Navigate to="/dashboard" replace />} />
              <Route path="*" element={<Navigate to="/login" replace />} />
            </Routes>
          </AuthProvider>
        </BrowserRouter>
      )
    }

    export default App
    ```

    If App.tsx does not yet exist (01-02 hasn't run), write the full version above. The executor for this plan may be running in parallel with 01-02. In that case, App.tsx will need a merge when 01-02 also modifies it — whoever runs second should reconcile both changes.
  </action>
  <verify>
    1. `npm run dev`
    2. Log in (requires 01-02 complete — if 01-02 is not done, skip to TypeScript verification only)
    3. Visit /dashboard — DashboardHeader appears at top with "Quiz You" and user's email
    4. LogoutButton is visible and clickable
    5. EmptyState copy is visible below the header
    6. "Start a quiz session" button appears but is disabled (greyed out)
    7. Click logout — redirected to /login
    8. Confirm no visible console errors
    9. `npx tsc --noEmit` — no TypeScript errors
  </verify>
  <done>
    - /dashboard renders DashboardHeader + EmptyState when authenticated
    - User's email is visible in the header (DATA-02: persisted identity is accessible)
    - LogoutButton is functional on the dashboard page
    - App.tsx has no DashboardPlaceholder remaining
    - TypeScript compiles cleanly
  </done>
</task>

<task type="checkpoint:human-verify">
  <name>Task 3: Visual verification of the complete Phase 1 user journey</name>
  <action>Human verification step. Claude has completed Tasks 1 and 2 autonomously. This task pauses for the user to manually test the full Phase 1 success criteria in the browser: signup, login, session persistence across refresh, session persistence across browser close/reopen, logout, and dashboard UI correctness. Claude cannot verify interactive browser behavior or confirm visual rendering.</action>
  <what-built>
    Complete Phase 1 auth flow: signup, login, session persistence, logout, and authenticated dashboard with empty state. This checkpoint verifies all four Phase 1 success criteria are met before marking the phase complete.
  </what-built>
  <how-to-verify>
    Run `npm run dev` and verify each success criterion:

    1. AUTH-01 — Signup and redirect:
       - Visit http://localhost:5173/signup
       - Create a new account with a fresh email address and password (8+ chars)
       - Expected: redirected to /dashboard immediately
       - Expected: user email visible in dashboard header

    2. AUTH-02 + AUTH-03 — Login and session persistence:
       - Log out (click the Log out button)
       - Visit /login, log back in with the same credentials
       - Expected: redirected to /dashboard
       - Refresh the browser (F5 or Cmd+R)
       - Expected: still on /dashboard, not redirected to /login

    3. AUTH-04 — Logout from dashboard:
       - Click the "Log out" button in the dashboard header
       - Expected: immediately redirected to /login
       - Manually navigate to http://localhost:5173/dashboard
       - Expected: redirected back to /login (protected route blocks access)

    4. DATA-02 — Identity persists across browser visits:
       - Close the browser tab entirely
       - Open a new tab and visit http://localhost:5173
       - Expected: redirected to /dashboard (session survives browser close/reopen)
       - Expected: user email still visible in dashboard header (identity persists)

    5. Dashboard UI check:
       - Verify "Quiz You" app name is visible in header
       - Verify user email appears in header
       - Verify "No sessions yet" or equivalent empty state heading is visible
       - Verify "Start a quiz session" button exists and appears disabled/greyed
       - Verify no console errors in browser DevTools

    All 5 criteria must pass before typing "approved".
  </how-to-verify>
  <resume-signal>Type "approved" if all 5 criteria pass. Describe any failures in detail if not.</resume-signal>
</task>

</tasks>

<verification>
Phase 1 is complete when the human verification checkpoint passes all five criteria. Cross-reference with Phase 1 success criteria from ROADMAP.md:

1. User can create an account with email and password and is redirected to the dashboard on success — verified by AUTH-01 check
2. User can log in with email and password and their session persists across browser refresh — verified by AUTH-02+AUTH-03 check
3. User can log out from any page and is immediately redirected to the login screen — verified by AUTH-04 check
4. User's identity and profile data survive across distinct browser visits (not just refreshes) — verified by DATA-02 check (new tab, browser restart)
</verification>

<success_criteria>
- All four Phase 1 success criteria pass the human verification checkpoint
- Dashboard renders user email confirming identity is accessible after login
- Empty state clearly communicates that quiz sessions will appear here
- No functional regressions: auth flow from 01-02 still works correctly with the real Dashboard
- TypeScript compiles cleanly: `npm run build` succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/01-authentication-foundation/01-03-SUMMARY.md` documenting:
- Tailwind CSS configuration status (was it already set up, or configured in this plan?)
- Any deviations from the plan (different component names, different copy)
- Results of the human verification checkpoint (which criteria passed/failed and how failures were resolved)
- Phase 1 completion status

Also update `.planning/STATE.md`:
- Current position: Phase 1 complete, Phase 2 is next
- Progress: [██████████] 25% (1 of 4 phases complete)
- Completed plans: 01-01, 01-02, 01-03
- Decisions captured: Any new decisions made during Phase 1 execution
</output>
